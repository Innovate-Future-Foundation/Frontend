jenkins:
  systemMessage: "Jenkins configured automatically by Configuration as Code plugin"
  
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "{{ jenkins_admin_username }}"
          password: "{{ jenkins_admin_password }}"

  authorizationStrategy:
    globalMatrix:
      permissions:
        - "Overall/Administer:{{ jenkins_admin_username }}"
        - "Overall/Read:authenticated"
        - "Job/Create:{{ jenkins_admin_username }}"
        - "Job/Delete:{{ jenkins_admin_username }}"
        - "Job/Configure:{{ jenkins_admin_username }}"
        - "Job/Read:authenticated"
        - "Job/Build:authenticated"

  numExecutors: 2

  # 工具配置（只定义一次）
  tool:
    git:
      installations:
        - name: "Default"
          home: "git"
    nodejs:
      installations:
        - name: "Node18"
          home: ""
          properties:
            - installSource:
                installers:
                  - nodeJS:
                    id: "18.19.0"
                    acceptLicense: true

  # 凭证配置
  credentials:
    system:
      domainCredentials:
        - credentials:
            - aws:
                scope: GLOBAL
                id: "aws-credentials"
                accessKey: "{{ jenkins_aws_access_key }}"
                secretKey: "{{ jenkins_aws_secret_key }}"
                description: "AWS credentials"
                iamRoleArn: ""
                iamMfaSerialNumber: ""
            - usernamePassword:
                scope: GLOBAL
                id: "github-credentials"
                username: "{{ jenkins_github_username }}"
                password: "{{ jenkins_github_token }}"
                description: "GitHub credentials"

# 系统配置
unclassified:
  location:
    url: "https://jenkins.{{ domain_name }}"
  gitHubPluginConfig:
    configs:
      - credentialsId: "github-credentials"
        name: "GitHub"

# 安全配置
security:
  gitHostKeyVerificationConfiguration:
    sshHostKeyVerificationStrategy: "acceptFirstConnectionStrategy"
  queueItemAuthenticator:
    authenticators:
      - global:
          strategy: "triggeringUsersAuthorizationStrategy"

# 云配置
clouds: []

# 通知配置
notifier:
  mail:
    recipientList: ""
    defaultSuffix: ""